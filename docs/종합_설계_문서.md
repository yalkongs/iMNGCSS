# 한국 은행 개인 신용평가 시스템 (KCS)
## 종합 설계 문서 v1.1

**최초 작성일**: 2026-02-27
**v1.1 업데이트**: 2026-02-27 (은행 실무 관점 검토 반영)
**작성자**: 시스템 아키텍처 팀
**문서 분류**: 내부 설계 문서 (감독당국 제출 가능)

> **v1.1 주요 변경사항**: 스트레스 DSR 단계별 규정 추가 / 주민번호 해싱 HMAC-SHA256 변경 /
> 챔피언-챌린저 Shadow 운영 방식 변경 / 감사 로그 신뢰성 강화 / 검증 항목 번호 재정렬 /
> 경제자본 리스크가중치 반영 / Phase 6/7 순서 교체 / 총 14개 이슈 수정
> (상세 내역: `docs/실무검토_보고서_v1.1.md` 참조)

---

## 목차

1. [시스템 개요 및 목표](#1-시스템-개요-및-목표)
2. [규제 준수 프레임워크](#2-규제-준수-프레임워크)
3. [신용평가 모델 아키텍처](#3-신용평가-모델-아키텍처)
4. [리스크-수익성 균형 설계](#4-리스크-수익성-균형-설계)
5. [데이터 전략](#5-데이터-전략)
6. [검증 체계 (4개 역할)](#6-검증-체계-4개-역할)
7. [시스템 기술 아키텍처](#7-시스템-기술-아키텍처)
8. [구현 파일 구조](#8-구현-파일-구조)
9. [구현 단계 및 일정](#9-구현-단계-및-일정)
10. [감독당국 보고 체계](#10-감독당국-보고-체계)
11. [미해결 과제 및 한계](#11-미해결-과제-및-한계)

---

## 1. 시스템 개요 및 목표

### 1.1 사업 목표
| 목표 | 지표 | 목표값 |
|------|------|-------|
| 대출 부도율 억제 | OOT Gini 계수 | ≥ 0.30 |
| 리스크 조정 수익 | RAROC | ≥ 10% (허들레이트) |
| 규제 준수 | 모든 감독 지표 | 100% 통과 |
| 고객 설명 의무 | 거절 사유 자동 생성 | 100% 건 |
| 처리 속도 | 실시간 평가 응답 | ≤ 500ms |

### 1.2 대상 상품

| 상품 | 한도 | 특성 | 주요 규제 |
|------|------|------|---------|
| 신용대출 (무담보) | 연소득 × 1.5 이하 | 신용도 중심 | DSR ≤ 40% |
| 주택담보대출 | LTV × 담보가치 | 담보 + 상환능력 | LTV ≤ 70%, DSR ≤ 40%, DTI ≤ 60% |
| 소액/마이크로론 | ≤ 3,000만원 | 신속 승인, 서민금융 | 최고금리 ≤ 연 20% |

### 1.3 핵심 설계 원칙

**① 규제 준수 우선**: 금감원/금융위 요구사항은 하드컷(Hard Cut)으로 처리. 협상 불가.
**② 리스크×수익 균형**: 단순 부도율 최소화가 아닌 RAROC 최적화. 지나치게 보수적인 모델은 수익 기회 상실.
**③ 설명가능성**: 모든 거절/승인 결정은 SHAP 기반 한국어 사유 3개를 고객에게 제공.
**④ 공정성**: 나이, 성별 등 민감 변수 직접 사용 금지. AI 가이드라인 7대 원칙 준수.
**⑤ 모니터링 내재화**: PSI, Gini 지속 추적. 기준 이탈 시 자동 알림 및 재학습 트리거.

---

## 2. 규제 준수 프레임워크

### 2.1 적용 법령 매핑

| 법령 | 핵심 조항 | 시스템 구현 | 자동 검증 |
|------|---------|-----------|---------|
| 신용정보법 | §32 동의, §20의2 보존(5년) | `consent_manager.py` + `audit_logger.py` | `test_compliance.py` |
| 금융소비자보호법 | §19 설명의무, §47 거절 사유 고지 | `explanation_engine.py` (SHAP → 한국어) | `test_explanation.py` |
| 개인정보 보호법 | §28의2 가명처리, §17 목적 외 사용 금지 | `data_masking.py` (주민번호 해시, 성명 마스킹) | `test_privacy.py` |
| 은행업 감독규정 | §37 LTV, §79 DSR | `limit_calculator.py` (하드컷) | `test_regulatory_limits.py` |
| 바젤III/IV | 신용리스크 표준방법 / IRB | `risk_parameters.py` (PD/LGD/EAD) | `test_risk_parameters.py` |
| 대부업법 | §8 최고금리 20% | `pricing_engine.py` (상한 검증) | `test_interest_rate.py` |
| 금융위 AI 가이드라인 ('24) | 7대 원칙, 알고리즘 공정성 | `fairness_monitor.py` | `test_fairness.py` |
| 인공지능기본법 ('26.1 시행) | 고위험 AI 요구사항 | 모델 문서화 + 인간 검토 트리거 | `test_governance.py` |

### 2.2 규제 한도 하드컷 로직

```
신용대출 승인 프로세스:
  신청 접수
    ↓
  [하드컷 1] CB 연체 상태 ≥ 3개월 → 즉시 거절
    ↓
  [하드컷 2] DSR > 40% → 한도 축소 or 거절
    ↓
  [하드컷 3] 모델 점수 < 430 (D등급) → 거절
    ↓
  [소프트컷] 430~500점 → 수동 심사 대기열
    ↓
  최종 승인 + 금리 책정

주택담보대출 추가 하드컷:
  [하드컷 4] LTV > 70% (일반지역) / 60% (조정대상) / 40% (투기과열) → 한도 조정
  [하드컷 5] DTI > 60% → 거절 (※ 2022년 이후 실무상 DSR로 통합, DTI는 보조 지표)
  [하드컷 6] 다주택자(보유 주택 수 ≥ 2채) → LTV 추가 하향 (금감원 특별 관리)
             - 2주택자: LTV -10%p 추가 하향
             - 3주택 이상: LTV -20%p 추가 하향 (투기지역은 원칙 거절)
```

### 2.3 DSR 계산 방식

```
월 DSR = (기존 모든 대출 원리금 + 신청 대출 원리금) / 월 소득 × 100

원리금 계산:
  - 기존 대출: CB 데이터 실제 월 납입액
  - 신청 대출: 원리금균등상환 기준 (금리: 심사금리, 기간: 실제 신청기간)
  - 심사금리: max(신청금리, 스트레스 금리) ← 금리 상승 대비

스트레스 금리 (금감원 스트레스 DSR, [C-01 수정]):
  - 고정금리 대출: 현행금리 그대로 (스트레스 미적용)
  - 변동금리 대출: 현행금리 + 스트레스 가산금리

스트레스 가산금리 단계별 적용 (금감원 가계부채 관리 방안):
  ┌──────────────┬─────────────────┬─────────────────┐
  │ 단계          │ 수도권            │ 비수도권          │
  ├──────────────┼─────────────────┼─────────────────┤
  │ 1단계(23.07) │ +0.38%p         │ +0.75%p         │
  │ 2단계(24.02) │ +0.75%p         │ +1.50%p         │
  └──────────────┴─────────────────┴─────────────────┘

  ※ 은행권 개인 신용대출·주택담보대출은 2단계(+0.75%p 이상) 의무 적용
  ※ 소액마이크로론(3,000만원 이하)은 1단계 적용

예시:
  - 서울 소재, 변동금리 신청금리 5.0% → 심사금리 = 5.0% + 0.75% = 5.75%
  - 지방, 변동금리 신청금리 5.0% → 심사금리 = 5.0% + 1.50% = 6.50%
```

---

## 3. 신용평가 모델 아키텍처

### 3.1 3단계 스코어카드 체계

```
[신청평점 - Application Scorecard]
  용도: 신규 대출 신청 시 부도 예측
  알고리즘: LightGBM (주모델) + Logistic Regression (백업/감사용)
  목표변수: 관측 시점 후 12개월 내 90일 이상 원리금 연체 발생 여부 (Binary)
           ※ 목표변수 명확화: 단순 연체가 아닌 "90일 이상 연체" (금감원 부도 기준)
  예측력 기준: OOT Gini ≥ 0.30

[행동평점 - Behavioral Scorecard]
  용도: 기존 대출 고객 위험 변화 모니터링 (월 1회 배치)
  알고리즘: XGBoost
  목표변수: 현재 시점 후 6개월 내 30일 이상 연체 발생 여부 (조기 경보)
           ※ Application과 별도 목표변수: 더 이른 연체 신호(30일)로 조기 개입
  예측력 기준: OOT Gini ≥ 0.25

[추심평점 - Collection Scorecard]
  용도: 연체 발생 후 회수 가능성 예측
  알고리즘: Random Forest
  목표변수: 연체 발생 후 90일 내 전액 상환(회수 성공) 여부
  예측력 기준: OOT Gini ≥ 0.20
```

**모니터링 PSI 3종 분류 [I-05 추가]**:
```
① Score PSI: 모델 예측 확률(PD) 분포 변화 → 모델 출력 전체 이동 감지
   기준: < 0.10 (안정) / 0.10~0.20 (주의) / ≥ 0.20 (불안정, 재학습 필요)

② Feature PSI: 입력 피처 분포 변화 → 어떤 변수가 변했는지 원인 진단
   모니터링 대상: cb_score, dsr_ratio, inquiry_count_3m 등 상위 IV 피처
   기준: 동일 (0.10 / 0.20)

③ Target PSI (Bad Rate Drift): 실제 부도율 변화 추이
   기준: 월별 부도율이 학습 기간 부도율 ±2.5%p 초과 시 경보
   ※ Target PSI 이상 = 경기 환경 변화 또는 모집단 구조적 변화 의심
```

### 3.2 상품별 모델 라우팅

```
대출 신청 API (POST /api/v1/score)
    │
    ├── product_type == "credit"
    │     └── Application Scorecard
    │           → DSR 계산 (하드컷)
    │           → 점수 → 등급 → 금리 책정
    │           → 한도 = min(연소득×1.5, DSR 잔여한도)
    │
    ├── product_type == "mortgage"
    │     └── Application Scorecard (주담대 버전)
    │           → LTV/DTI/DSR 계산 (3중 하드컷)
    │           → 담보 지역 구분 (일반/조정/투기)
    │           → 한도 = min(담보가치×LTV, DSR 잔여한도)
    │
    └── product_type == "micro"
          └── Application Scorecard (경량화)
                → 3,000만원 상한 하드컷
                → 최고금리 20% 검증
                → 빠른 승인 (목표: 1분 내)
```

### 3.3 피처 변수 설계

#### 3.3.1 피처 그룹 및 중요도

| 그룹 | 변수 | 예상 IV 범위 | 데이터 소스 |
|------|------|------------|----------|
| **신용이력** (가장 중요) | cb_score, delinquency_count_12m, worst_delinquency_status | 0.3 ~ 1.0+ | CB (나이스/KCB) |
| **재무비율** | dsr_ratio, debt_to_income, loan_to_income | 0.1 ~ 0.5 | 신청서 + CB |
| **거래행동** | savings_rate, card_usage_rate, overdraft_count | 0.05 ~ 0.2 | 오픈뱅킹 |
| **인구통계** | employment_duration_months, age (구간화) | 0.02 ~ 0.15 | 신청서 |
| **대안데이터** | telecom_no_delinquency, health_insurance_months | 0.02 ~ 0.10 | 통신사/건보공단 |

#### 3.3.2 민감 변수 처리 원칙

```
직접 사용 금지 (AI 가이드라인):
  - 성별 (gender) → 소득/직업 통해 간접 반영
  - 거주 지역 (address) → 우편번호 클러스터 사용 (선택적)
  - 출생년도 → 연령대 구간화 (10년 단위)로만 사용
  - 국적, 종교, 장애 여부 → 절대 사용 금지

WOE/IV 기반 피처 선택:
  IV < 0.02  → 제거 (예측력 없음)
  IV 0.02~0.10 → 검토 (약한 예측력)
  IV 0.10~0.30 → 포함 (보통 예측력)
  IV ≥ 0.30   → 핵심 피처 (강한 예측력)
```

### 3.4 점수 스케일링 설계

```
스코어링 공식:
  신용점수 = Offset - Factor × ln(Odds)
  Odds = PD / (1 - PD)

파라미터:
  Base Score (기준점수): 600점
  Base Odds (기준 부도율 대응): 72‰ (약 7.2%)  ← 한국 신용대출 평균 부도율
  PDO (40포인트 = 2배 부도확률): 40점

결과:
  600점 → PD ≈ 7.2% (시장 평균)
  640점 → PD ≈ 3.6% (2배 우량)
  560점 → PD ≈ 14.4% (2배 불량)
  범위:  300점 ~ 900점

등급 체계 (10등급):
  AAA: 820+ → PD < 0.05%
  AA:  780~819 → PD 0.05~0.10%
  A:   740~779 → PD 0.10~0.30%
  BBB: 700~739 → PD 0.30~1.00%
  BB:  660~699 → PD 1.00~3.00%
  B:   620~659 → PD 3.00~7.00%
  CCC: 560~619 → PD 7.00~15.0%
  CC:  500~559 → PD 15.0~30.0%
  C:   430~499 → PD 30.0~50.0%
  D:   < 430   → PD > 50.0% → 거절
```

---

## 4. 리스크-수익성 균형 설계

### 4.1 설계 철학

> **"단순히 부도를 막는 모델이 아닌, 은행이 지속 성장할 수 있는 최적 포트폴리오를 구성하는 모델"**

보수적 모델의 함정:
- Cutoff를 높이면 부도율↓, 하지만 승인율↓ → 수익 기회 상실
- 경쟁 은행에 우량 고객 빼앗김 (역선택)

공격적 모델의 함정:
- 승인율↑ → 부도율↑ → 충당금↑ → 수익 악화
- 감독당국 제재 리스크

**최적점: RAROC 극대화**

### 4.2 리스크 기반 가격책정 (Risk-Based Pricing)

```
최종 금리 = 기준금리 + 신용가산금리 + 조달비용 + 운영비용 - 관계거래 할인

구성 요소:
  기준금리:      한국은행 기준금리 (현재 3.5%)
  신용가산금리:   등급별 PD × LGD × 안전마진 계수
  조달비용:      CD91일물 + 은행채 가산 (~0.8%)
  운영비용:      신규 심사비용 / 대출잔액 (~1.5%)
  관계거래 할인: 급여이체 / 자동납부 / 장기거래 고객 (-0.1% ~ -0.5%)

등급별 신용가산금리 설계:
  AAA:  +1.0%  → 최종금리 ~5.0%
  AA:   +1.5%  → 최종금리 ~5.5%
  A:    +2.5%  → 최종금리 ~6.5%
  BBB:  +4.0%  → 최종금리 ~8.0%
  BB:   +6.5%  → 최종금리 ~10.5%
  B:    +10.0% → 최종금리 ~14.0%
  CCC:  +16.0% → 최종금리 ~19.0%
  CC 이하: 거절 원칙 (단, 담보 충분 시 심사 가능)
  상한: 연 20% (대부업법)
```

### 4.3 RAROC 기반 포트폴리오 최적화

```
RAROC = (이자수익 - 조달비용 - 운영비용 - 기대손실) / 경제자본

경제자본 계산 [I-04 수정: 리스크가중치 반영]:
  경제자본 = EAD × 리스크가중치(RW) × BIS 자기자본비율(8%)

  상품별 리스크가중치 (바젤 표준방법 기준):
  ┌──────────────────┬──────────────┬──────────────────┐
  │ 상품              │ RW           │ 경제자본/EAD      │
  ├──────────────────┼──────────────┼──────────────────┤
  │ 무담보 신용대출    │ 75% (소매)   │ EAD × 6.0%      │
  │ 주택담보대출       │ 35% (우량담보)│ EAD × 2.8%      │
  │ 소액마이크로론     │ 75% (소매)   │ EAD × 6.0%      │
  └──────────────────┴──────────────┴──────────────────┘

EAD 계산 [I-03 수정: CCF 기본 정책]:
  - 분할상환 신용대출: EAD = 현재 잔액 (CCF ≈ 1.0)
  - 한도대출/마이너스통장: EAD = 잔액 + 미사용한도 × CCF(0.20~0.50)
  ※ v1 구현 범위: 분할상환 신용대출만 우선 적용 (EAD = 잔액)

목표:
  전체 포트폴리오 RAROC ≥ 10% (허들레이트)
  등급별 RAROC 0% 이상 (손실 등급 배제)

승인 전략 레버:
  Cutoff 점수 조정: 보수↑ vs 수익↑
  한도 정책: 고위험 등급 한도 축소
  금리 정책: 등급별 차등 가산금리
  기간 정책: 고위험 등급 단기 상품으로 유도
```

### 4.4 챔피언-챌린저 프레임워크

```
챔피언 모델 (Champion): 현재 운영 중인 검증된 모델 (실제 결정에 사용)
챌린저 모델 (Challenger): 신규 개발 도전 모델 (Shadow 운영)

운영 방식 [C-04 수정: Shadow 운영으로 변경]:
  ① Shadow 운영 단계 (최소 30일):
     - 모든 신청 건에 챔피언·챌린저 모두 실행
     - 실제 승인/거절 결정은 챔피언 결과만 사용
     - 챌린저 결과는 `challenger_results` 테이블에만 저장 (비공개)
     - 금융소비자보호법 §19 준수: 동일 조건 고객 차별 결과 방지

  ② 성과 비교 및 승격 기준:
     - 챌린저 OOT Gini ≥ 챔피언 + 0.02 (유의미한 개선)
     - p-value < 0.05 (통계 유의성)
     - Shadow 기간 내 챌린저 예측 부도율 정확도 확인

  ③ 챔피언 교체:
     - 리스크관리위원회 승인 후 교체
     - 교체 전 7일 감독당국 사전 통보 (모범규준)

목적:
  - 지속적 모델 개선 (고객 차별 없이)
  - 운영 리스크 최소화
  - 감독당국 요구 모델 진화 증거 제시
```

---

## 5. 데이터 전략

### 5.1 데이터 소스 계층

| 계층 | 데이터 | 제공자 | 동의 필요 |
|------|--------|-------|---------|
| **1순위** | 신용점수, 연체이력, 대출 현황 | CB (나이스평가정보, KCB) | 신용정보법 §32 |
| **2순위** | 월 소득, 취업 여부 | 건강보험공단 (건보료 기반) | 별도 동의 |
| **3순위** | 연금 납부 이력 | 국민연금공단 | 별도 동의 |
| **4순위** | 오픈뱅킹 계좌 거래 | 금융결제원 (마이데이터) | **마이데이터 사업자 허가 필요** (신용정보법 §22의9) [I-07] |
| **5순위** | 통신비 납부 이력 | 이동통신사 | 별도 동의 (대안 데이터) |

> **[I-07] 마이데이터 사업자 허가 조건**:
> - 금융위원회 「마이데이터 사업자」 지정 필요 (신용정보법 §22의9)
> - 허가 미취득 시 4순위(오픈뱅킹 거래) 데이터 활용 불가
> - **임시 대안**: 고객 직접 동의 기반 오픈뱅킹 조회 API(금융결제원) 활용
>   (계좌 주인이 직접 조회 위임하는 방식 → 마이데이터 허가 불필요)

**소득 검증 방법별 신뢰도 [I-02 추가]**:

| 직업 유형 | 소득 검증 방법 | 신뢰도 |
|----------|------------|-------|
| 근로자 (4대보험) | 건강보험료 기반 환산 (`건보료 / 0.0709 × 12`) | 고 |
| 자영업자 | 국세청 종합소득세 신고액 또는 부가세 과세표준 | 중 |
| 프리랜서/기타 | 연간 입금액(오픈뱅킹) 기반 추정 | 저 |
| 미확인 | 고객 신고 소득 | 최저 (수동 심사 필수) |

**CB 조회 실패 처리 방안 [I-06 추가]**:
```
CB 조회 요청
  → 성공: 정상 평가 진행
  → 실패(1차): 1초 대기 후 재시도
  → 실패(2차): 1초 대기 후 재시도
  → 실패(3차): 수동 심사 대기열 이동 + 고객 SMS 안내
              ("CB 조회 지연으로 담당자가 연락 예정")
  ※ CB 조회 없이 자동 모델 평가 절대 불가 (신용정보법 §32 위반)
```

### 5.2 합성 데이터 설계 (실제 통계 기반)

```
생성 건수:
  신용대출 Application 데이터: 50,000건
  주택담보대출 데이터:         20,000건
  소액마이크로론 데이터:        15,000건
  Behavioral 데이터:           20,000건
  Collection 데이터:            5,000건
  총합:                        110,000건

통계 기반:
  나이 분포: 통계청 경제활동인구 조사 (2023년)
  소득 분포: 통계청 가계소득 조사 (2023년)
  CB 점수 분포: 나이스 공시 평균 680점, 표준편차 120
  부도율: 금감원 은행 여신 연체율 7.2% (2023년 기준)
  DSR 분포: 금융위 가계부채 통계 기반

시계열 설계:
  학습 기간: 2021-01 ~ 2023-06 (관측 기준)
  Hold-out:  2023-01 ~ 2023-06 (학습의 마지막 20%)
  OOT 기간:  2023-07 ~ 2024-06 (미래 데이터 시뮬레이션)
```

### 5.3 데이터 거버넌스

```
개인정보 보호법 준수 [C-02 수정: 해싱 방식 강화]:
  - 주민번호: HMAC-SHA256(주민번호, 기관고정Salt) → 64자리 해시값만 저장
    ※ 단순 SHA-256은 레인보우 테이블 공격 취약 → HMAC 방식으로 변경
    ※ Salt = 시스템 고정 비밀키 (HSM 또는 환경변수 관리, 외부 노출 금지)
  - 성명: "홍*동" 형태 마스킹
  - 주소: 시/군/구 수준으로 집계
  - 보존 기간: 5년 후 자동 파기 (신용정보법)
  - 목적 외 사용 금지: 데이터 접근 로그 전수 기록

데이터 품질 규칙:
  - CB 점수 범위: 300~1000 (초과 시 이상값 처리)
  - 소득: 최소 600만원/년 (실질 심사 기준)
  - 연령: 만 19세 이상 (미성년자 자동 거절)
  - DSR: 0~300% (음수/극단값 이상 처리)
```

---

## 6. 검증 체계 (4개 역할)

### 6.1 역할 분리 원칙 (4 Eyes Principle)

```
┌─────────────────────────────────────────────────────────────┐
│                    검증 체계 전체 구조                         │
│                                                             │
│  [모델 개발팀]           [리스크관리팀]                        │
│  - 통계적 유효성           - RAROC/수익성                     │
│  - 피처 품질 (WOE/IV)      - PD 보정 (Calibration)           │
│  - 과적합 검사             - EL 충당금 적정성                  │
│  - PSI 안정성              - 포트폴리오 농도 리스크             │
│         ↓                         ↓                         │
│  [내부감사팀]            [금감원/외부검증기관]                  │
│  - 규제 한도 준수           - 독립 모델 검증                   │
│  - 감사 로그 완전성         - 공정성 심층 검사                  │
│  - 동의 관리 절차           - 데이터 거버넌스 감사              │
│  - 설명의무 이행 여부        - AI 가이드라인 준수               │
└─────────────────────────────────────────────────────────────┘
```

### 6.2 역할별 검증 항목 상세

#### [역할 1] 모델 개발팀 (Developer Validation)

| 검증 ID | 항목 | 기준 | 근거 |
|---------|------|------|------|
| DEV-01 | OOT Gini | ≥ 0.30 | 금감원 모범규준 |
| DEV-02 | OOT KS 통계량 | ≥ 0.20 | 업계 표준 |
| DEV-03 | OOT AUC-ROC | ≥ 0.65 | 업계 표준 |
| DEV-04 | Train-HoldOut Gini 차이 | ≤ 0.10 | 과적합 방지 |
| DEV-05 | HoldOut-OOT Gini 차이 | ≤ 0.15 | 시간적 안정성 |
| DEV-06 | CV AUC 표준편차 | ≤ 0.02 | 모델 안정성 |
| DEV-07 | 모든 피처 IV | ≥ 0.02 | WOE/IV 기준 |
| DEV-08 | 상위 3개 피처 중 IV≥0.10 | ≥ 2개 | 핵심 피처 확보 |
| DEV-09 | 민감 변수 미사용 | 0건 | AI 가이드라인 |
| DEV-10 | 피처 수 | 5~50개 | 과소/과다 방지 |
| DEV-11 | PSI (학습→OOT) – 불안정 | < 0.20 | 모집단 안정성 |
| DEV-12 | PSI (학습→OOT) – 경고 | < 0.10 (권장) | 모집단 안정성 |
| DEV-13 | 점수 범위 | 300~900 | 스케일링 설계 |
| DEV-14 | 학습/OOT 부도율 차이 | ≤ 5%p | 모집단 일관성 |
| DEV-15 | 등급별 부도율 단조성 | 단조증가 | 등급 타당성 |

> **[C-03] 항목 번호 재정렬**: v1.0의 DEV-12(점수범위)/DEV-13(부도율차이)/DEV-14(단조성)가
> 테스트 코드와 불일치하여 DEV-12(PSI 경고 추가)/DEV-13~15 재정렬. 테스트 코드 동기화 필요.

#### [역할 2] 리스크관리팀 (Risk Management Validation)

| 검증 ID | 항목 | 기준 | 근거 |
|---------|------|------|------|
| RISK-01 | PD 보정 오차 | ≤ 30% | 바젤III 요건 |
| RISK-02 | 등급별 PD 단조성 | 엄격 단조증가 | 바젤III 요건 |
| RISK-03 | LGD 범위 (무담보) | 30~60% | 바젤III 표준 |
| RISK-04 | 포트폴리오 기대손실률 | 1~10% | 업계 기준 |
| RISK-05 | 포트폴리오 RAROC | ≥ 10% | 내부 허들레이트 |
| RISK-06 | 고등급(AAA~A) RAROC | > 0% | 수익성 최소 기준 |
| RISK-07 | 금리 > 기대손실률 | 전 등급 | 역마진 방지 |
| RISK-08 | 최고금리 | ≤ 20% | 대부업법 §8 |
| RISK-09 | 순이자마진(NIM) | > 0% | 수익 구조 기본 |
| RISK-10 | 가산금리 단조성 | 엄격 단조증가 | 가격책정 타당성 |
| RISK-11 | 승인율 | 40~85% | 영업/리스크 균형 |
| RISK-12 | 단일 등급 편중 | ≤ 40% | 집중 리스크 |
| RISK-13 | EL vs 실제손실 비율 | 50~200% | 백테스팅 |

#### [역할 3] 내부감사팀 (Internal Audit Validation)

| 검증 ID | 항목 | 기준 | 근거 |
|---------|------|------|------|
| AUDIT-01 | DSR 한도 하드컷 | 100% 적용 | 은행업 감독규정 |
| AUDIT-02 | LTV 한도 (지역별) | 일반≤70%, 조정≤60%, 투기≤40% | 은행업 감독규정 |
| AUDIT-03 | 최고금리 준수 | 100% | 대부업법 |
| AUDIT-04 | 미성년자 차단 | 만 19세 미만 거절 | 민법 |
| AUDIT-05 | CB 동의 없이 평가 불가 | 0건 위반 | 신용정보법 §32 |
| AUDIT-06 | 거절 시 사유 3개 고지 | 100% | 금융소비자보호법 §47 |
| AUDIT-07 | 모든 평가 감사로그 기록 | 0건 누락 | 신용정보법 §20의2 |
| AUDIT-08 | 주민번호 평문 미저장 | 0건 | 개인정보보호법 §25 |
| AUDIT-09 | 모델 검증 연 1회 이상 | 이행 | 금감원 모범규준 |
| AUDIT-10 | 챔피언 모델 승인 절차 | 이행 (리스크관리위원회) | 금감원 모범규준 |

#### [역할 4] 감독당국 / 외부검증 (Regulatory Validation)

| 검증 ID | 항목 | 기준 | 근거 |
|---------|------|------|------|
| REG-01 | 공정성 (연령대별 Gini 차이) | ≤ 0.15 | AI 가이드라인 |
| REG-02 | 공정성 (고연령 불이익) | Gini 차이 ≤ 0.10 | AI 가이드라인 |
| REG-03 | 모델 문서 완전성 | 9개 필수 항목 | 금감원 모범규준 |
| REG-04 | SHAP 설명 품질 | Top-3 요인 제공 | 금융소비자보호법 |
| REG-05 | AI 7대 원칙 준수 | 전 항목 | 금융위 AI 가이드라인 |
| REG-06 | OOT Gini ≥ 0.30 | 독립 검증 | 금감원 모범규준 |
| REG-07 | 인간 검토 프로세스 | 경계점수 수동 심사 | AI 가이드라인 (보조수단성) |
| REG-08 | 데이터 보존 기간 | 5년 | 신용정보법 §20의2 |
| REG-09 | 모집단 변화 감지 | PSI 모니터링 | 금감원 모범규준 |
| REG-10 | 모델 독립 검증 절차 | 개발팀 외 검증 | 금감원 모범규준 (4 Eyes) |

---

## 7. 시스템 기술 아키텍처

### 7.1 전체 구성도

```
                          [클라이언트]
                     (은행 영업점 / 모바일 앱)
                              │
                              ▼
                    ┌─────────────────┐
                    │  FastAPI (8000)  │  ← JWT 인증 + RBAC [I-08], Rate Limiting
                    │  REST API v1     │  ← 역할: 영업점/심사관/리스크/감사팀
                    └────────┬────────┘
                             │
              ┌──────────────┼──────────────┐
              ▼              ▼              ▼
    ┌──────────────┐  ┌──────────────┐  ┌──────────────┐
    │ Scoring      │  │ Application  │  │ Monitoring   │
    │ Engine       │  │ CRUD         │  │ API          │
    │ (실시간평가)  │  │ (신청 관리)  │  │ (PSI/Gini)  │
    └──────┬───────┘  └──────────────┘  └──────────────┘
           │
   ┌───────┴────────┐
   ▼                ▼
┌─────────┐    ┌──────────────┐
│ Model   │    │ Limit        │
│ Registry│    │ Calculator   │
│ (pkl)   │    │ (DSR/LTV)    │
└────┬────┘    └──────────────┘
     │
     ▼
┌─────────────────────────────────┐
│  LightGBM / XGBoost / RF 모델  │
│  + SHAP Explainer              │
│  + Score Scaling (300~900)     │
└─────────────────────────────────┘
           │
   ┌───────┴────────┐
   ▼                ▼
┌──────────┐  ┌──────────────┐
│ PostgreSQL│  │   Redis      │
│ (결과저장)│  │ (캐시/세션)  │
└──────────┘  └──────────────┘
```

### 7.2 실시간 평가 응답 흐름 (목표: ≤ 500ms)

```
① 요청 수신 (0ms)
② JWT 인증 검증 (5ms)
③ CB 동의 확인 (10ms)
④ 입력값 유효성 검사 (15ms)
⑤ 피처 엔지니어링 (30ms)
⑥ 모델 추론 (LightGBM) (50ms)
⑦ SHAP 값 산출 (Top 5 피처만) (80ms)
⑧ 점수 스케일링 + 등급 변환 (5ms)
⑨ DSR/LTV 하드컷 검사 (10ms)
⑩ 금리 책정 (10ms)
⑪ 감사 로그 저장 [C-05 수정]: Kafka 큐 발행 (0ms, 비동기) → 별도 Consumer가 감사 DB에 at-least-once 저장
   ※ 비동기 Fire-and-forget 금지: 신용정보법 §20의2 위반 리스크
   ※ Kafka Consumer 실패 시 DLQ(Dead Letter Queue) → 수동 복구 절차
⑫ 응답 반환 (280ms 이내 목표)
```

---

## 8. 구현 파일 구조

```
korea-credit-scoring/
│
├── docs/                                  ← 설계 문서 (현재 파일)
│   ├── 종합_설계_문서.md                   ← 이 문서
│   └── api_specification.md              ← API 명세
│
├── regulatory_reports/                    ← 감독당국 제출 보고서 (자동 생성)
│   ├── model_validation_report.html      ← 모델 검증 보고서
│   ├── fairness_assessment_report.html   ← 공정성 평가 보고서
│   ├── data_governance_report.html       ← 데이터 거버넌스 보고서
│   └── risk_profitability_report.html    ← 리스크-수익성 보고서
│
├── validation/                            ← 검증 체계
│   ├── roles/
│   │   ├── developer/
│   │   │   └── test_model_performance.py ← 개발팀 검증 (DEV-01~14)
│   │   ├── risk_management/
│   │   │   └── test_risk_profitability.py ← 리스크팀 검증 (RISK-01~13)
│   │   ├── internal_audit/
│   │   │   └── test_regulatory_compliance.py ← 감사팀 검증 (AUDIT-01~10)
│   │   └── regulatory/
│   │       └── test_regulatory_validation.py ← 감독당국 검증 (REG-01~10)
│   └── reports/
│       └── generate_validation_report.py ← 검증 결과 → HTML 보고서
│
├── ml_pipeline/
│   ├── data/
│   │   ├── synthetic_data.py             ← 합성 데이터 생성 (110,000건)
│   │   └── *.parquet                     ← 생성된 데이터
│   ├── training/
│   │   ├── train_application.py          ← Application Scorecard 학습
│   │   ├── train_behavioral.py           ← Behavioral Scorecard 학습
│   │   └── train_collection.py           ← Collection Scorecard 학습
│   ├── validation/
│   │   ├── oot_validation.py             ← OOT 검증
│   │   └── champion_challenger.py        ← 챔피언-챌린저 테스트
│   └── artifacts/
│       ├── application/
│       │   ├── model.pkl                 ← 학습된 LightGBM
│       │   ├── model_card.json           ← 모델 상세 정보
│       │   ├── iv_report.csv             ← WOE/IV 보고서
│       │   └── shap_importance.csv       ← SHAP 피처 중요도
│       ├── behavioral/
│       └── collection/
│
├── backend/
│   ├── app/
│   │   ├── main.py                       ← FastAPI 앱
│   │   ├── config.py                     ← 규제 파라미터 설정
│   │   ├── api/v1/
│   │   │   ├── scoring.py                ← POST /score
│   │   │   ├── applications.py           ← 대출 신청 CRUD
│   │   │   ├── models.py                 ← 모델 버전 관리
│   │   │   └── monitoring.py             ← PSI/Gini 지표
│   │   ├── core/
│   │   │   ├── scoring_engine.py         ← 메인 평가 오케스트레이터
│   │   │   ├── feature_engineering.py   ← 피처 생성
│   │   │   ├── model_registry.py         ← 모델 로딩/관리
│   │   │   └── limit_calculator.py       ← DSR/LTV/DTI 하드컷
│   │   ├── compliance/
│   │   │   ├── explanation_engine.py     ← SHAP → 한국어 거절사유
│   │   │   ├── fairness_monitor.py       ← 알고리즘 공정성 (Score/Feature/Target PSI)
│   │   │   ├── consent_manager.py        ← CB 동의 관리 + CB 조회 실패 처리
│   │   │   └── audit_logger.py           ← 감사 로그 (Kafka at-least-once, 5년)
│   │   ├── security/
│   │   │   ├── rbac.py                   ← 역할 기반 접근 제어 (영업점/심사관/리스크/감사)
│   │   │   └── crypto.py                 ← HMAC-SHA256 해싱 유틸 (주민번호)
│   │   └── pricing/
│   │       ├── pricing_engine.py         ← 리스크 기반 금리 (COFIX/CD91 기준 지수 선택)
│   │       └── risk_parameters.py        ← PD/LGD/EAD/CCF/리스크가중치(RW)
│
├── tests/
│   ├── unit/                             ← 단위 테스트
│   ├── integration/                      ← 통합 테스트
│   └── regulatory/                       ← 규제 준수 테스트
│
├── docker-compose.yml
├── Makefile
└── .env.example
```

---

## 9. 구현 단계 및 일정

### Phase 1: 기반 설정 ✅ 완료
- 디렉토리 구조, Docker, Makefile, .env.example
- DB 스키마 (4개 테이블 + audit_log)
- config.py (규제 파라미터 중앙화)

### Phase 2: 합성 데이터 + 모델 학습 ✅ 완료 (부분)
- `synthetic_data.py`: 110,000건 합성 데이터 생성기
- `train_application.py`: LightGBM 학습 파이프라인 (WOE/IV → 학습 → 검증 → 저장)
- Behavioral/Collection 학습 스크립트 (미완)

### Phase 3: 검증 체계 🔄 진행 중
- [개발팀] `test_model_performance.py` ✅ 완료
- [리스크팀] `test_risk_profitability.py` ✅ 완료
- [내부감사팀] `test_regulatory_compliance.py` 🔲 예정
- [감독당국] `test_regulatory_validation.py` 🔲 예정

### Phase 4: FastAPI 비즈니스 로직 🔲 예정
- `scoring_engine.py`, `limit_calculator.py`
- `explanation_engine.py` (SHAP → 한국어)
- `pricing_engine.py`, `risk_parameters.py`

### Phase 5: FastAPI REST API 🔲 예정
- 라우터 4개 (scoring, applications, models, monitoring)
- Pydantic 요청/응답 스키마
- JWT 인증 미들웨어

### Phase 6: 통합 테스트 🔲 예정 [C-06 수정: 보고서 이전에 테스트 완료]
- end-to-end API 테스트 (pytest + httpx)
- 전체 규제 준수 자동 검사 (DSR/LTV/금리 하드컷)
- RBAC 권한 테스트 (역할별 API 접근 검증)
- 감사 로그 완전성 테스트 (0건 누락 검증)

### Phase 7: 감독당국 보고서 자동 생성 🔲 예정 [C-06 수정: 통합 테스트 완료 후 생성]
- `generate_validation_report.py` (통합 테스트 결과 포함)
- HTML 보고서 4종
- ※ Phase 6 통과 후에만 Phase 7 실행 (CI/CD 파이프라인으로 강제)

---

## 10. 감독당국 보고 체계

### 10.1 정기 보고 계획

| 보고서 | 제출 대상 | 주기 | 자동화 |
|------|---------|------|------|
| 모델 검증 보고서 | 금융감독원 | 연 1회 | ✓ |
| 공정성 평가 보고서 | 금융위원회 | 연 1회 | ✓ |
| 데이터 거버넌스 보고서 | 내부감사 | 반기 | ✓ |
| 리스크-수익성 보고서 | 리스크관리위원회 | 분기 | ✓ |
| PSI 모니터링 보고서 | 내부 시스템 | 월간 | ✓ |
| 챔피언-챌린저 결과 | 리스크관리위원회 | 분기 | ✓ |

### 10.2 보고서 자동 생성 방식

```
1. pytest 전체 검증 스위트 실행
   → tests/regulatory/ 결과 JSON으로 수집

2. 모델 아티팩트 지표 수집
   → ml_pipeline/artifacts/*/model_card.json

3. HTML 보고서 생성 (Jinja2 템플릿)
   → regulatory_reports/ 저장

4. 검증 실패 항목 자동 하이라이트
   → 붉은색 표시 + 조치 필요 사항 명시
```

---

## 11. 미해결 과제 및 한계

### 11.1 현재 설계의 한계점

| 항목 | 현재 상태 | 개선 방향 |
|------|---------|---------|
| 실제 CB 데이터 없음 | 합성 데이터 사용 | 나이스/KCB API 연동 필요 |
| 마이데이터 미연동 | 오픈뱅킹 거래 직접 수집 불가 | 금융위 마이데이터 사업자 허가 후 플랫폼 연동 |
| 다변량 스트레스 테스트 미구현 | 경기침체 시나리오 검증 부재 | 금리상승/실업률 시나리오 추가 |
| MLOps 파이프라인 미완 | 수동 재학습 | Airflow/MLflow 연동 자동화 |
| 설명 가능성 깊이 부족 | SHAP Top-5 수준 | 전체 점수 기여도 분해 보고서 |
| 기준금리 하드코딩 | config.py 정적 값 | DB/Redis 동적 파라미터 관리 [M-01] |
| LTV 규제지역 동적 관리 미구현 | 정적 상수 | regulated_areas 테이블 + 주소 매핑 [M-02] |
| 변동금리 기준 지수 미설계 | 기준금리만 사용 | COFIX(잔액/신규), CD91일물 연동 [M-04] |
| 여신심사위원회 플로우 없음 | 고액대출 심사 불가 | 금액 임계값(예: 5억) 초과 시 위원회 회부 |
| 탈출자 편향(Reject Inference) 미적용 | 거절 고객 데이터 부재 | semi-supervised 방법론으로 보정 필요 |

### 11.2 추가 필요 작업 (우선순위 순)

1. **빈티지 분석 (Vintage Analysis)** [M-05 우선순위 상향]: 실행 코호트별(월별) 누적 부도율 추이 분석. 모델 성과의 핵심 지표 → Phase 3 검증 체계에 포함 권고
2. **스트레스 테스팅**: 금리 +2%, 실업률 +3%p, 부동산 -30% 시나리오에서 포트폴리오 EL·RAROC 재추정
3. **탈출자 편향 (Reject Inference)**: 거절 고객 데이터 semi-supervised 방법(Augmentation, Parcelling)으로 보정
4. **조기 부도 탐지**: 실행 후 6개월 이내 부도 급증 모니터링 (Early Warning)
5. **여신심사위원회 연동**: 신청 금액 5억 이상 또는 경계 점수(C등급) 건 → 위원회 회부 워크플로우
6. **생성형 AI 악용 탐지**: 허위 재직증명서·소득증빙 탐지 (이미지 위변조 검출)

---

*본 문서는 Korea Credit Scoring System (KCS) v1.1 기준으로 작성되었습니다.*
*v1.0 → v1.1: 은행 실무 관점 검토 반영 (2026-02-27), 수정 14건*
*다음 검토 예정일: 2026-06-30*
*상세 수정 이력: `docs/실무검토_보고서_v1.1.md`*
