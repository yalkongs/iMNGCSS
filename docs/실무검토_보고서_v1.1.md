# KCS 설계 실무 검토 보고서
## 은행 실무 관점 설계 검증 결과

**검토 일자**: 2026-02-27
**검토 범위**: 종합_설계_문서.md v1.0 + 구현 코드 전수
**검토 관점**: 금융감독원 모범규준 / 바젤III / 한국 은행 실무

---

## 검토 요약

| 구분 | 건수 |
|------|------|
| Critical (즉시 수정) | 6건 |
| Important (중요 수정) | 8건 |
| Minor (경미 개선) | 5건 |
| **총계** | **19건** |

---

## Critical Issues (즉시 수정 필요)

### [C-01] 스트레스 DSR 로직 구체화 누락
- **발견 위치**: 섹션 2.3, synthetic_data.py
- **문제**: 설계문서에 `스트레스 금리 = 현행금리 + 1.5%p` 언급만 있고, 금감원 스트레스 DSR 단계별 가산금리 규정이 누락됨
- **실무 기준**:
  - 스트레스 DSR 1단계 (2023.07 시행): 변동금리 +0.38%p (수도권), +0.75%p (기타)
  - 스트레스 DSR 2단계 (2024.02 시행): +0.75%p (수도권), +1.50%p (기타)
  - 은행권 개인 신용대출은 1단계부터 의무 적용
- **수정 방향**: `limit_calculator.py`에 스트레스 DSR 계산 함수 추가, 지역 구분(수도권/비수도권) 파라미터 추가

### [C-02] 주민번호 해싱 방식 취약 (보안)
- **발견 위치**: `backend/app/db/schemas/applicant.py:19` – `SHA-256 해시`
- **문제**: SHA-256 단순 해시는 레인보우 테이블 공격에 취약. 개인정보보호법 §29 안전조치 미달 가능성
- **실무 기준**: HMAC-SHA256 + 기관 고정 Salt 사용이 표준 (금융보안원 전자금융기반시설 보안 지침)
- **수정 방향**: `HMAC-SHA256(주민번호, SECRET_KEY)` 방식으로 변경. Salt는 HSM(Hardware Security Module) 또는 환경 변수로 관리

### [C-03] 검증 항목 번호 불일치 (설계문서 ↔ 테스트 코드)
- **발견 위치**: 섹션 6.2 ↔ `validation/roles/developer/test_model_performance.py`
- **문제**:

  | 설계문서 ID | 설계문서 내용 | 테스트코드 실제 내용 |
  |------------|--------------|------------------|
  | DEV-11 | PSI < 0.20 | PSI < 0.20 ✓ |
  | DEV-12 | **점수 범위 300~900** | PSI 경고(0.10) ✗ |
  | DEV-13 | **학습/OOT 부도율 차이 ≤5%p** | 점수 범위 300~900 ✗ |
  | DEV-14 | **등급별 부도율 단조성** | 부도율 차이 ≤5%p ✗ |
  | (없음) | - | 등급별 부도율 단조성 **테스트 없음** |

- **수정 방향**: 설계문서 DEV-12~14 번호 재정렬 또는 테스트 코드 재정렬. 등급별 부도율 단조성 테스트 추가

### [C-04] 챔피언-챌린저 직접 A/B 운영 리스크
- **발견 위치**: 섹션 4.4
- **문제**: "일일 신청 건의 10~20%를 챌린저 모델로 실제 심사"하면 동일 조건 고객에게 다른 결과가 나옴 → 금융소비자보호법 §19 설명의무 및 차별 금지 위반 리스크
- **실무 기준**: Shadow 운영 (동일 신청에 챔피언·챌린저 모두 실행, 챌린저 결과는 DB에만 저장, 실제 결정은 챔피언만 사용) → 일정 기간 후 성과 비교
- **수정 방향**: 챔피언-챌린저 운영 방식을 Shadow 모드로 변경

### [C-05] 감사 로그 비동기 처리 신뢰성 문제
- **발견 위치**: 섹션 7.2 (⑪ 감사 로그 비동기 저장, 0ms)
- **문제**: 비동기 처리 시 애플리케이션/DB 장애 발생 시 로그 유실 가능. 신용정보법 §20의2 위반 (신용평가 이력 5년 보존 의무)
- **실무 기준**: 감사 로그는 트랜잭션 내 동기 처리 우선, 또는 Kafka/RabbitMQ를 통한 at-least-once delivery 보장
- **수정 방향**: 설계서에 "감사 로그 = 비동기 큐(Kafka) → 별도 감사 DB에 at-least-once 저장" 명시

### [C-06] Phase 6/7 순서 역전
- **발견 위치**: 섹션 9 (구현 단계)
- **문제**: Phase 6(감독당국 보고서 자동 생성)이 Phase 7(통합 테스트) 이전 → 통합 테스트 미완료 상태에서 보고서를 생성하면 보고서 결과값 신뢰 불가
- **수정 방향**: Phase 6↔7 순서 교체. 통합 테스트 완료 후 보고서 생성

---

## Important Issues (중요 수정)

### [I-01] 다주택자 규제 필드 누락
- **발견 위치**: `backend/app/db/schemas/loan_application.py`
- **문제**: 다주택자 LTV 추가 하향(섹션 2.2 하드컷 6) 로직이 있으나, 스키마에 `owned_property_count(보유 주택 수)` 필드가 없음
- **수정 방향**: `LoanApplication` 스키마에 `owned_property_count` 필드 추가

### [I-02] 자영업자 소득 검증 방법 미구체화
- **발견 위치**: 섹션 5.1, `applicant.py:30` (`income_verified`)
- **문제**: `income_verified: bool` 필드가 있으나 검증 방법이 미정의
  - 근로자: 건강보험료 납부 이력 → 연소득 환산 (`건보료 × 397배` 공식, 2023년 건보 요율 7.09% 기준)
  - 자영업자: 종합소득세 신고액(홈택스 연계) 또는 부가가치세 과세표준
- **수정 방향**: `income_source` 필드 추가 (`payroll/self_employed_tax/estimated`), 소득 검증 방법별 신뢰도 가중치 명시

### [I-03] EAD 계산 단순화 (신용전환계수 CCF 미적용)
- **발견 위치**: `test_risk_profitability.py:114` (`df["ead"] = df["loan_amount"]`)
- **문제**: 현재 EAD = 잔액 전액. 한도대출·신용카드·마이너스통장 등 회전대출은 미사용 한도에 CCF(신용전환계수) 적용 필요
  - 한도대출: EAD = 잔액 + 미사용한도 × CCF(0.20~0.50)
  - 신용대출(분할상환): EAD ≈ 잔액 (CCF 적용 미미)
- **수정 방향**: 상품 유형별 CCF 파라미터 추가. 1단계는 신용대출만 EAD = 잔액으로 단순화 후 명시

### [I-04] 경제자본 계산에 리스크가중치 미반영
- **발견 위치**: `test_risk_profitability.py:125` (`df["ead"] × CAPITAL_RATIO(0.08)`)
- **문제**: 경제자본 = EAD × 8%로 단순화. 바젤 표준방법(SA) 기준 리스크가중치 적용 필요
  - 무담보 소매대출(Retail): RW = 75% → 경제자본 = EAD × 75% × 8% = EAD × 6%
  - 주택담보대출: RW = 35% → 경제자본 = EAD × 35% × 8% = EAD × 2.8%
  - 결과: 현재 계산이 소매대출 경제자본을 33% 과대 추정
- **수정 방향**: `risk_parameters.py`에 상품별 리스크가중치 테이블 추가

### [I-05] PSI 분류 기준 불명확 (Score/Feature/Target PSI 미구분)
- **발견 위치**: 섹션 3.1, `train_application.py:338`
- **문제**: PSI를 스코어 분포에만 적용. 실무 모니터링에는 3가지 PSI 필요
  - **Score PSI**: 모델 출력(예측 확률) 분포 변화 감지
  - **Feature PSI**: 입력 변수 분포 변화 (어떤 피처가 변했는지 진단)
  - **Target PSI**: 실제 부도율 변화 추이
- **수정 방향**: `monitoring.py`에 3종 PSI 대시보드 항목 명시

### [I-06] CB 조회 실패 처리 방안 미정의
- **발견 위치**: 섹션 5.1, 섹션 7
- **문제**: CB(나이스/KCB) API 조회 실패 시 fallback 전략이 없음
  - CB 조회 실패는 시스템 장애 또는 네트워크 오류로 일상적으로 발생
- **수정 방향**: Retry(3회, 1s 간격) → 실패 시 수동 심사 대기열 이동 + 고객 안내. CB 조회 없이 모델 실행 금지

### [I-07] 마이데이터 활용을 위한 사업자 등록 요건 미언급
- **발견 위치**: 섹션 5.1 (4순위: 오픈뱅킹, 마이데이터)
- **문제**: 마이데이터 플랫폼(금융결제원)을 통한 거래 데이터 수집은 「신용정보법」 §22의9 마이데이터 사업자 허가 필요. 이 요건이 설계서에 명시되지 않음
- **수정 방향**: 데이터 전략 섹션에 마이데이터 사업자 등록 전제조건 명시. 허가 전까지는 고객 직접 동의 기반 오픈뱅킹 API(금융결제원) 활용으로 임시 대체

### [I-08] 역할 기반 접근 제어(RBAC) 미설계
- **발견 위치**: 섹션 7 (JWT 인증 언급만)
- **문제**: 실무에서 영업점 직원·심사관·리스크팀·감사팀·IT운영 등 역할별 API 접근 권한이 달라야 함
  - 영업점: 신청 접수, 조회
  - 심사관: 수동 심사, 결과 변경
  - 리스크팀: 모델 성과 지표, 포트폴리오 통계
  - 감사팀: 감사 로그 전체 조회
- **수정 방향**: JWT payload에 role 클레임 추가, FastAPI Dependency 기반 RBAC 구현 계획 추가

---

## Minor Issues (경미한 개선)

### [M-01] 기준금리 하드코딩
- `config.py:51` `BASE_RATE: float = 3.5` → 한국은행 기준금리 변경 시 배포 필요
- **개선 방향**: DB 또는 Redis에 동적 파라미터로 관리, 관리자 API로 업데이트

### [M-02] LTV 규제 지역 동적 관리 필요
- 조정대상지역 변경이 빈번 (금융위 고시) → 설계문서의 지역별 LTV 값이 정적 상수로 관리됨
- **개선 방향**: `regulated_areas` 테이블 추가, 주소 → 지역 코드 → LTV 한도 동적 조회

### [M-03] 소액마이크로론 최소 소득 기준 재검토
- 설계문서 소득 최소 600만원/년이 소액론 신청자에게는 과도한 기준
- 서민금융(보금자리론, 새희망홀씨 등)은 소득 200만원 이하 저소득층 대상
- **개선 방향**: 상품별 최소 소득 기준 분리 설정

### [M-04] 변동금리 COFIX 연동 미설계
- 섹션 4.2 금리 산출에 기준금리만 사용. 실무는 COFIX(잔액/신규) 또는 CD 91일물 연동
- **개선 방향**: `pricing_engine.py`에 기준 지수 선택 파라미터 추가 (COFIX_잔액 / COFIX_신규 / CD91)

### [M-05] 빈티지 분석(Vintage Analysis) 우선순위 상향 권고
- 현재 11.2 추가 필요 작업으로 낮은 우선순위
- 실무에서는 빈티지 분석이 모델 성과의 핵심 지표 (실행 코호트별 부도율 누적 추이)
- **개선 방향**: Phase 3 검증 체계에 빈티지 분석 포함 권고

---

## 수정 완료 목록 (설계문서 v1.1)

| 이슈 ID | 수정 내용 | 위치 |
|---------|----------|------|
| C-01 | 스트레스 DSR 단계별 가산금리 표 추가 | 섹션 2.3 |
| C-02 | 주민번호 해싱 HMAC-SHA256으로 변경 | 섹션 5.3 |
| C-03 | 검증 항목 번호 DEV-12~14 재정렬 | 섹션 6.2 |
| C-04 | 챔피언-챌린저 Shadow 운영 방식으로 변경 | 섹션 4.4 |
| C-05 | 감사 로그 at-least-once 보장 방식 명시 | 섹션 7.2 |
| C-06 | Phase 6/7 순서 교체 | 섹션 9 |
| I-01 | 다주택자 필드 추가 (owned_property_count) | 섹션 8 |
| I-02 | 소득 검증 방법 구체화 | 섹션 5.1 |
| I-03 | EAD/CCF 주석 및 상품별 단순화 명시 | 섹션 4.3 |
| I-04 | 경제자본 리스크가중치 테이블 추가 | 섹션 4.3 |
| I-05 | PSI 3종 구분 추가 | 섹션 3.1, 섹션 7 |
| I-06 | CB 조회 실패 처리 방안 추가 | 섹션 5.1 |
| I-07 | 마이데이터 허가 요건 명시 | 섹션 5.1 |
| I-08 | RBAC 설계 추가 | 섹션 7 |

---

*본 검토는 2026-02-27 기준 금융감독원 규정, 바젤III 기준, 한국 은행 실무 관행을 기반으로 작성됨*
